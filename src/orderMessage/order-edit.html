<!DOCTYPE html>
<html class="x-admin-sm">

<head>
    <meta charset="UTF-8">
    <title>订单管理</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" />
    <link rel="stylesheet" href="../css/font.css">
    <link rel="stylesheet" href="../css/xadmin.css">
    <link rel="stylesheet" href="../lib/TableFilter/tableFilter.css">
    <link rel="stylesheet" href="./css/common.css?VERSION">
    <link rel="stylesheet" href="./css/order-list.css?VERSION">
    <link rel="stylesheet" href="./css/order-edit.css?VERSION">
    <script src="./js/polyfill.js?VERSION"></script>
    <script src="../js/jquery.min.js"></script>
    <script src="../lib/layui/layui.js" charset="utf-8"></script>
    
    <script src="../js/common.js?VERSION"></script>
    <script src="./js/area.js"></script>
    <script src="https://mapapi.careland.com.cn/api/?key=6012dcd6278a2d4db3840604&v=1.3"></script>
    <!--[if lt IE 9]>
    <script src="https://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
    <script src="https://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>
    <div class="x-nav">
        <span class="layui-breadcrumb">
            <a>业务管理</a>
            <a>订单管理</a>
            <a>
                <cite class="page_title_text">订单修改</cite>
            </a>
        </span>
        <a class="layui-btn layui-btn-small" style="line-height:1.6em;margin-top:3px;float:right" onclick="location.reload()" title="刷新">
            <i class="layui-icon layui-icon-refresh" style="line-height:30px"></i>
        </a>
    </div>
    <div class="layui-fluid">
        <div class="layui-row layui-col-space15 page_block">
            <div class="layui-col-md12 page-container">
                <!-- 头部 -->
                <div class="page-header border-bottom">
                    <div class="layui-row">
                        <div class="layui-col-md6">
                            <div class="title">基础信息</div>
                            <div class="hiddenMap" id="hiddenMap"></div>
                        </div>
                        <div style="line-height: 32px;" class="layui-col-md1 layui-col-md-offset5 btn_btn">
                            <span id="add_car" class="blue pointer">添加车辆</span>
                        </div>
                    </div>
                </div>
                <div id="base_info" class="page_content"></div>
            </div>
        </div>
        <div id="car_form_container" class="car_car_form_container"></div>
        <script id="base_info_tpl" type="text/html">
            <div class="layui-row">
                <div class="layui-col-md6">
                    <span class="content_name">业务单号：</span>
                    <span id="" class="content_name blue">{{d.orderNo}}</span>
                </div>
                <div class="layui-col-md6">
                    <span class="content_name">订单类型：</span>
                    <span class="content_name blue">
                        {{#  
                            var fn = function(type){
                                if(type == 1){
                                    return '单车单';
                                }else if(type == 2){
                                    return '背车单';
                                }else{
                                    return '非法类型';
                                }
                            }; 
                        }}
                          {{fn(d.orderType)}}
                    </span>
                </div>
            </div>
        </script>
        <script id="income_info_tpl" type="text/html">
            <div class="layui-row">
                <div class="layui-col-md6">
                    <span class="content_name">收入总金额：</span>
                    <span id="totalIncome" class="content_name blue">{{d.totalIncome}} 元</span>
                </div>
                <div class="layui-col-md6">
                    <span class="content_name">管理费总金额：</span>
                    <span id="totalManageFee" class="content_name blue">{{d.totalManageFee}} 元</span>
                </div>
            </div>
        </script>
        <script id="car_info_tpl" type="text/html">
            <form data-filter="CARFORM" lay-filter="CARFORM" class="car_info_form layui-row layui-col-space15 page_block layui-form CARFORM">
                <div class="page-header border-bottom">
                    <div class="layui-row">
                        <div class="layui-col-md1">
                            <div class="title">车辆信息</div>
                            <input class="carOilCapacity" type="text" name="oilCapacity" style="width:0;height:0;visibility:hidden;pointer-events:none;">
                        </div>
                        <div style="line-height: 32px;" class="layui-col-md1 blue pointer btn_btn">
                            <span class="select_vin" data-filter="CARFORM">选择vin码</span>
                        </div>
                        <div style="line-height: 32px;" class="layui-col-md1 layui-col-md-offset8 btn_btn switch_updown">
                            <input data-filter="CARFORM" class="masterFlag" lay-filter="masterFlag" type="checkbox" name="masterFlag" lay-text="上车|下车" lay-skin="switch" checked="checked">
                        </div>
                        <div style="line-height: 32px;" class="layui-col-md1 btn_btn">
                            <span data-filter="CARFORM" class="del_car_btn blue pointer">删除车辆</span>
                        </div>
                    </div>
                </div>
                <div class="form_item_container">
                    <div class="layui-form-item layui-row">
                        <input class="hide" name="id" type="text">
                        <div class="layui-inline layui-col-md3">
                            <label class="layui-form-label text_left form_label">车辆vin码</label><br>
                            <div class="layui-input-inline">
                                <input data-filter="CARFORM" type="text" name="vinCode" lay-verify="required" autocomplete="off" class="layui-input vinCode_input">
                            </div>
                        </div>
                        <div class="layui-inline layui-col-md3 layui-col-md-offset1">
                            <label class="layui-form-label text_left form_label">产品代码</label><br>
                            <div class="layui-input-inline">
                                <input type="text" data-filter="CARFORM" name="productCode" lay-verify="required" autocomplete="off" class="layui-input productCode_input product_code">
                            </div>
                        </div>
                        <div class="layui-inline layui-col-md3 layui-col-md-offset1">
                            <label class="layui-form-label text_left form_label">车型</label><br>
                            <div class="layui-input-inline">
                                <input disabled type="text" name="model" lay-verify="required" autocomplete="off" class="model layui-input">
                            </div>
                        </div>
                    </div>
                    <div class="layui-form-item layui-row">
                        <div class="layui-inline layui-col-md3">
                            <label class="layui-form-label text_left form_label">轴数</label><br>
                            <div class="layui-input-inline">
                                <input disabled type="text" name="shaftNum" lay-verify="required" autocomplete="off" class="layui-input">
                            </div>
                        </div>
                        <div class="layui-inline layui-col-md3 layui-col-md-offset1">
                            <label class="layui-form-label text_left form_label">功率</label><br>
                            <div class="layui-input-inline">
                                <input disabled type="text" name="power" lay-verify="required" autocomplete="off" class="layui-input">
                            </div>
                        </div>
                        <div class="layui-inline layui-col-md3 layui-col-md-offset1">
                            <label class="layui-form-label text_left form_label">GPS设备编号</label><br>
                            <div class="layui-input-inline">
                                <input type="text" name="gpsDeviceCode" lay-verify="required" autocomplete="off" class="layui-input">
                            </div>
                        </div>
                    </div>
                    <div class="layui-form-item layui-row">
                        <div class="layui-inline layui-col-md3">
                            <label class="layui-form-label text_left form_label"><span class="red">*</span>客户名称</label><br>
                            <div class="layui-input-inline">
                                <!-- <input type="text" name="customerFullName" lay-verify="required" autocomplete="off" class="layui-input"> -->

                                <select name="customerFullName" lay-verify="required" class="customerList" lay-filter="customerFullName" lay-search>
                                </select>  
                            </div>
                        </div>
                        <div class="layui-inline layui-col-md3 layui-col-md-offset1">
                            <label class="layui-form-label text_left form_label"><span class="red">*</span>发车仓库</label><br>
                            <div data-filter="CARFORM" class="layui-input-inline startWarehouse_selector startWarehouse_selector_CARFORM">
                                <!-- <input type="text" name="startWarehouse" lay-verify="required" autocomplete="off" class="layui-input"> -->
                                <div class="layui-form-select">
                                    <div class="layui-select-title">
                                        <input name="startWarehouse" type="text" class="startWarehouse_search_input layui-input" autocomplete="off">
                                    </div>
                                    <dl data-filter="CARFORM" class="layui-anim layui-anim-upbit startWarehouse_options">
                                        <dd lay-value="" class="layui-select-tips">暂无数据</dd>
                                    </dl>
                                </div>
                            </div>
                        </div>
                        <div class="layui-inline layui-col-md3 layui-col-md-offset1">
                            <label class="layui-form-label text_left form_label">仓库单号</label><br>
                            <div class="layui-input-inline">
                                <input type="text" name="warehouseNo" autocomplete="off" class="layui-input" autocomplete="off">
                            </div>
                        </div>
                    </div>
                    <div class="layui-form-item layui-row">
                        <div class="layui-inline layui-col-md3">
                            <label class="layui-form-label text_left form_label"><span class="red">*</span>发车停车场</label><br>
                            <div class="layui-input-inline">
                                <!-- <input type="text" name="startPark" lay-verify="required" autocomplete="off" class="layui-input"> -->

                                <select name="startPark" lay-verify="required" class="startParkList" lay-filter="startPark" lay-search>
                                </select>  
                            </div>
                        </div>
                        <div style="display:inline-block;" class="layui-inline layui-col-md3 layui-col-md-offset1">
                            <label class="layui-form-label text_left form_label"><span class="red">*</span>发车城市</label><br>
                            <div class="layui-form-item">
                                <div class="layui-inline flex_h start_city_selector">
                                    <div class="layui-input-inline" style="min-width:100px;margin:0;">
                                        <select data-filter="CARFORM" name="startProvince" id="startProvince" class="startProvince CARFORM" lay-verify="required" lay-search lay-filter="startProvince">
                                            <option value="">省份</option>
                                        </select>
                                    </div>
                                    <div class="layui-input-inline" style="min-width:100px;margin:0;">
                                        <select data-filter="CARFORM" name="startCity" id="startCity" class="startCity CARFORM" lay-verify="required" lay-search lay-filter="startCity">
                                            <option value="">地级市</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <!-- <input type="text" name="startCity" lay-verify="required" autocomplete="off" class="layui-input"> -->
                            <!-- <div class="layui-input-inline"> -->
                                <!-- <input type="text" name="startCity" lay-verify="required" autocomplete="off" class="layui-input"> -->
                                <!-- <div class="layui-row">
                                    <div class="layui-col-md6">
                                        <select name="startCity" lay-verify="">
                                            <option value="010">北京</option>
                                            <option value="021" disabled>上海（禁用效果）</option>
                                            <option value="0571" selected>杭州</option>
                                        </select>
                                    </div>
                                    <div class="layui-col-md6">
                                        <select name="city" lay-verify="">
                                            <option value="010">北京</option>
                                            <option value="021" disabled>上海（禁用效果）</option>
                                            <option value="0571" selected>杭州</option>
                                        </select>
                                    </div>
                                </div> -->
                            <!-- </div> -->
                        </div>
                        <div class="layui-inline layui-col-md3 layui-col-md-offset1">
                            <label class="layui-form-label text_left form_label">发车地址</label><br>
                            <div class="address-map layui-row">
                                <div class="layui-input-inline layui-col-md9" style="width: 250px;margin-right: 0;">
                                    <!-- <input type="text" name="endAddress" autocomplete="off" class="layui-input getAddressList"> -->
                                    <input class="layui-input location-start-name" name="startAddress" id="seach-location-input-start" autocomplete="off" placeholder="请输入收车位置" value=""/>
                                    <input class="startLat" name="startLat" autocomplete="off" value="" style="width: 0;height: 0;opacity:0;"/>
                                    <input class="startLng" name="startLng" autocomplete="off" value="" style="width: 0;height: 0;opacity:0;"/>
                                </div>
                                <div class="layui-input-inline layui-col-md3" style="width: 50px;">
                                    <a data-field="start" class="layui-btn showMap selectMapLocation">选择</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="layui-form-item layui-row">
                        <div class="layui-inline layui-col-md3">
                            <label class="layui-form-label text_left form_label"><span class="red">*</span>收车网点</label><br>
                            <div data-filter="CARFORM" class="layui-input-inline end_park_selector end_park_selector_CARFORM">
                                <div class="layui-form-select">
                                    <div class="layui-select-title">
                                        <input name="endPark" type="text" class="end_park_search_input layui-input" autocomplete="off">
                                        <input name="endAddrCode" class="endAddrCode" autocomplete="off" value="" style="width: 0;height: 0;opacity:0;"/>
                                    </div>
                                    <dl data-filter="CARFORM" class="layui-anim layui-anim-upbit end_park_options">
                                        <dd lay-value="" class="layui-select-tips">暂无数据</dd>
                                    </dl>
                                </div>
                            </div>
                        </div>
                        <div class="layui-inline layui-col-md3 layui-col-md-offset1">
                            <label class="layui-form-label text_left form_label"><span class="red">*</span>收车城市</label><br>
                            <!-- <div class="layui-input-inline">
                                <input type="text" name="endCity" autocomplete="off" class="layui-input">
                            </div> -->
                            <div class="layui-form-item">
                                <div class="layui-inline flex_h end_city_selector">
                                    <div class="layui-input-inline" style="min-width:100px;margin:0;">
                                        <select data-filter="CARFORM" name="endProvince" id="endProvince" class="endProvince CARFORM" lay-verify="required" lay-search lay-filter="endProvince">
                                            <option value="">省份</option>
                                        </select>
                                    </div>
                                    <div class="layui-input-inline" style="min-width:100px;margin:0;">
                                        <select data-filter="CARFORM" name="endCity" id="endCity" class="endCity CARFORM" lay-verify="required" lay-search lay-filter="endCity">
                                            <option value="">地级市</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <!-- <input type="text" name="endCity" autocomplete="off" class="layui-input"> -->
                        </div>
                        
                        <div class="layui-inline layui-col-md3 layui-col-md-offset1">
                            <label class="layui-form-label text_left form_label">收车地址</label><br>
                            <div class="address-map layui-row">
                                <div class="layui-input-inline layui-col-md9" style="width: 250px;margin-right: 0;">
                                    <!-- <input type="text" name="endAddress" autocomplete="off" class="layui-input getAddressList"> -->
                                    <input class="layui-input location-end-name" name="endAddress" id="seach-location-input" autocomplete="off" placeholder="请输入收车位置" value=""/>
                                    <input name="endLat" autocomplete="off" value="" style="width: 0;height: 0;opacity:0;"/>
                                    <input name="endLng" autocomplete="off" value="" style="width: 0;height: 0;opacity:0;"/>
                                </div>
                                <div class="layui-input-inline layui-col-md3" style="width: 50px;">
                                    <a data-field="end" class="layui-btn showMap selectMapLocation">选择</a>
                                </div>
                            </div>
                            <!-- <div class="layui-input-inline">
                                <input type="text" name="endAddress" autocomplete="off" class="layui-input">
                            </div> -->
                        </div>
                    </div>
                    <div class="layui-form-item layui-row">
                        <div class="layui-inline layui-col-md3">
                            <label class="layui-form-label text_left form_label">收车联系人</label><br>
                            <div class="layui-input-inline">
                                <div class="layui-row">
                                    <div class="layui-col-md6">
                                        <input type="text" name="connectorName" autocomplete="off" class="layui-input" placeholder="联系人姓名">
                                    </div>
                                    <div class="layui-col-md6">
                                        <input type="text" name="connectorPhone" autocomplete="off" class="layui-input" placeholder="联系人手机号">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="layui-inline layui-col-md3 layui-col-md-offset1">
                            <label class="layui-form-label text_left form_label"><span class="red">*</span>最迟送达时间</label><br>
                            <div class="layui-input-inline">
                                <input id="" type="text" name="latestArriveTime" lay-verify="required" autocomplete="off" class="layui-input latestArriveTime">
                            </div>
                        </div>
                        <div class="layui-inline layui-col-md3 layui-col-md-offset1">
                            <label class="layui-form-label text_left form_label"><span class="red">*</span>客户里程</label><br>
                            <div class="layui-input-inline relative">
                                <span class="input_unit">km</span>
                                <input type="text" name="customerMileage" autocomplete="off" class="layui-input customerMileage">
                            </div>
                        </div>
                    </div>
                    <div class="layui-form-item layui-row">
                        <div class="layui-inline layui-col-md3">
                            <label class="layui-form-label text_left form_label"><span class="red">*</span>收入金额</label><br>
                            <div class="layui-input-inline relative">
                                <span class="input_unit">元</span>
                                <input onkeyup="num(this)" {{d.income=='****'?'disabled':''}} data-filter="CARFORM" type="text" name="income" autocomplete="off" class="layui-input car_income">
                            </div>
                        </div>
                        <div class="layui-inline layui-col-md3 layui-col-md-offset1">
                            <label class="layui-form-label text_left form_label"><span class="red">*</span>管理费</label><br>
                            <div class="layui-input-inline relative">
                                <span class="input_unit">元</span>
                                <input onkeyup="num(this)" {{d.manageFee=='****'?'disabled':''}} data-filter="CARFORM" type="text" name="manageFee" autocomplete="off" class="layui-input car_manageFee">
                            </div>
                        </div>
                        <div class="layui-inline layui-col-md3 layui-col-md-offset1">
                            <label class="layui-form-label text_left form_label"><span class="red">*</span>结算方式</label><br>
                            <div class="layui-input-inline">
                                <select disabled name="settleWay" lay-verify="settleWay">    
                                    <option value="1" selected>现结</option>
                                    <option value="2">月结</option>
                                    <option value="3">账期</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="layui-form-item layui-row">
                        <div class="layui-inline layui-col-md3">
                            <label class="layui-form-label text_left form_label"><span class="red">*</span>收入单价</label><br>
                            <div class="layui-input-inline relative">
                                <span class="input_unit">元/km</span>
                                <input onkeyup="num(this)" {{d.pricePerMeliage=='****'?'disabled':''}} type="text" name="pricePerMeliage" autocomplete="off" class="layui-input pricePerMeliage">
                            </div>
                        </div>
                        <div class="layui-inline layui-col-md3 layui-col-md-offset1">
                            <label class="layui-form-label text_left form_label">临牌号</label><br>
                            <div class="layui-input-inline">
                                <input type="text" name="tempLicense" autocomplete="off" class="layui-input tempLicense">
                            </div>
                        </div>
                        <div style="display:inline-block;" class="layui-inline layui-col-md3 layui-col-md-offset1">
                            <label class="layui-form-label text_left form_label">行驶证</label><br>
                            <div class="layui-input-inline">
                                <input readonly type="text" value="+点击上传图片" autocomplete="off" class="layui-input tempLicenseBackImage">
                                <input readonly type="text" name="tempLicenseBackImage" autocomplete="off" class="layui-input" style="width:0;height:0;opacity:0;">
                            </div>
                            <div class="tempLicenseBackImageBox">
                                <img style="width: 100%;height: auto;" src="" alt="">
                            </div>
                        </div>
                    </div>
                    <div class="layui-form-item layui-row">
                        <div class="layui-inline layui-col-md5">
                            <label class="layui-form-label text_left form_label">销售备注</label><br>
                            <div class="layui-input-inline">
                                <textarea name="saleRemark" required lay-verify="" placeholder="请输入" class="layui-textarea"></textarea>
                            </div>
                        </div>
                        <div class="layui-inline layui-col-md5 layui-col-md-offset1">
                            <label class="layui-form-label text_left form_label">储运备注</label><br>
                            <div class="layui-input-inline">
                                <textarea name="storageAndDeliverRemark" required lay-verify="" placeholder="请输入" class="layui-textarea"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="layui-form-item layui-row">
                        <div class="layui-inline layui-col-md5">
                            <label class="layui-form-label text_left form_label">经销商备注</label><br>
                            <div class="layui-input-inline">
                                <textarea name="dealerRemark" required lay-verify="required" placeholder="请输入" class="layui-textarea"></textarea>
                            </div>
                        </div>
                        <div class="layui-inline layui-col-md5 layui-col-md-offset1">
                            <label class="layui-form-label text_left form_label">发运资源库备注（委改库）</label><br>
                            <div class="layui-input-inline">
                                <textarea name="deliverResourceRemark" required lay-verify="required" placeholder="请输入" class="layui-textarea"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="layui-form-item layui-row">
                        <div class="layui-inline layui-col-md5">
                            <label class="layui-form-label text_left form_label">运输商备注</label><br>
                            <div class="layui-input-inline">
                                <textarea name="transportRemark" required lay-verify="required" placeholder="请输入" class="layui-textarea"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </script>
        <div class="layui-row layui-col-space15 page_block">
            <form class="layui-col-md12 page-container layui-form">
                <!-- 头部 -->
                <div class="page-header border-bottom">
                    <div class="layui-row">
                        <div class="layui-col-md6">
                            <div class="title">收入汇总信息</div>
                        </div>
                    </div>
                </div>
                <div id="income_info" class="page_content"></div>
            </form>
        </div>
        <div id="form_ascription_container" class="layui-row layui-col-space15 page_block"></div>
        <div class="layui-row layui-col-space15 page_block">
            <form lay-filter="form_dispatch" class="layui-col-md12 page-container layui-form">
                <!-- 头部 -->
                <div class="page-header border-bottom">
                    <div class="layui-row">
                        <div class="layui-col-md6">
                            <div class="title">调度信息</div>
                        </div>
                    </div>
                </div>
                <div id="form_fee_list" class="form_item_container">
                    <input class="hide" name="driverId" type="text">
                    <div class="layui-form-item layui-row">
                        <div class="layui-inline layui-col-md3">
                            <label class="layui-form-label text_left form_label">司机姓名</label><br>
                            <div id="driver_name_select" class="layui-input-inline layui-row">
                                <div class="layui-inline layui-col-md8" style="margin-right: 0;">
                                    <div class="layui-form-select driver_name_selector">
                                        <div class="layui-select-title">
                                            <input id="driver_name" name="driverName" type="text" class="layui-input" autocomplete="off">
                                        </div>
                                        <dl class="layui-anim layui-anim-upbit driverName_options">
                                            <dd lay-value="" class="layui-select-tips">暂无数据</dd>
                                        </dl>
                                    </div>
                                    <!-- <input id="driver_name" type="tel" name="driverName" lay-verify="required" autocomplete="off" class="layui-input"> -->
                                </div>
                                <div class="layui-inline layui-col-md3">
                                    <button id="select_driver_btn" type="button" class="layui-btn layui-btn-sm layui-btn-fluid">选择</button>
                                </div>
                                <div id="driver_select_item_container"></div>
                            </div>
                        </div>
                        <div class="layui-inline layui-col-md3 layui-col-md-offset1">
                            <label class="layui-form-label text_left form_label"><span class="red">*</span>司机手机</label><br>
                            <div class="layui-input-inline">
                                <input disabled type="text" name="driverPhone" lay-verify="required" autocomplete="off" class="layui-input">
                            </div>
                        </div>
                        <div class="layui-inline layui-col-md3 layui-col-md-offset1">
                            <label class="layui-form-label text_left form_label">司机身份证</label><br>
                            <div class="layui-input-inline">
                                <input disabled type="text" name="driverIdCard" lay-verify="required" autocomplete="off" class="layui-input">
                            </div>
                        </div>
                    </div>
                    <div class="layui-form-item layui-row">
                        <div class="layui-inline layui-col-md3">
                            <label class="layui-form-label text_left form_label">司机驾照</label><br>
                            <div class="layui-input-inline">
                                <input disabled type="tel" name="driverCertificate" lay-verify="required" autocomplete="off" class="layui-input">
                            </div>
                        </div>
                    </div>
                    <div id="fee_list_container"></div>
                </div>
            </form>
        </div>
        <div style="background-color: #ffffff;">
            <div id="form_fee_container" class="layui-row layui-col-space15 page_block"></div>
            <div id="btn_container" class="btn_container">
                <div class="layui-row">
                    <div class="layui-col-md1 text_center layui-col-md-offset5">
                        <div id="btn_cancel" class="layui-btn layui-btn-primary">取消</div>
                    </div>
                    <div class="layui-col-md1 text_center">
                        <div id="btn_confirm" class="layui-btn layui-btn-normal">确认</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script id="fee_form_tpl" type="text/html">
        <form lay-filter="form_fee" class="layui-form form_fee">
            <div class="page-header border-bottom">
                <div class="layui-row">
                    <div class="layui-col-md6">
                        <div class="title">运费信息</div>
                    </div>
                </div>
            </div>
            <div class="form_item_container">
                <div class="layui-form-item layui-row">
                    <div class="layui-inline layui-col-md3">
                        <label class="layui-form-label text_left form_label">承运公里数</label><br>
                        <div class="layui-input-inline relative">
                            <span class="input_unit">km</span>
                            <input onchange="num(this)" disabled type="text" value="{{d.feeDetail.driverMileage}}" name="driverMileage" lay-verify="required" autocomplete="off" class="layui-input driverMileage">
                        </div>
                    </div>
                    <div class="layui-inline layui-col-md3 layui-col-md-offset1">
                        <label class="layui-form-label text_left form_label">费用模板</label><br>
                        <div class="layui-input-inline relative">
                            <input onchange="num(this)" disabled type="text" value="{{d.feeName || d.feeDetail.feeName || '- -'}}" name="feeName" lay-verify="required" autocomplete="off" class="layui-input feeName">
                        </div>
                    </div>
                    <div class="layui-inline layui-col-md3 layui-col-md-offset1">
                        <label class="layui-form-label text_left form_label">费用车型</label><br>
                        <div class="layui-input-inline relative">
                            <input onchange="num(this)" disabled type="text" value="{{d.carModel || d.feeDetail.carModel || '- -'}}" name="carModel" lay-verify="required" autocomplete="off" class="layui-input carModel">
                        </div>
                    </div>
                </div>
            </div>
            <div class="form_item_container">
                <div class="layui-form-item layui-row">
                    <div class="layui-inline layui-col-md4">
                        <label class="layui-form-label text_left form_label">应给油</label><br>
                        <div class="layui-input-inline layui-row">
                            <div class="layui-col-md7 relative">
                                <span class="input_unit">升</span>
                                <input data-field="oil" value="{{d.feeDetail.oil}}" onkeyup="num(this)" type="text" name="oil" autocomplete="off" class="layui-input input_fee">
                            </div>
                            <div class="layui-col-md5 origin_fee">
                                <div class="blue">规定：{{d.oilUnitPrice}} 升/百公里</div>
                                <div class="blue">实际：{{d.feeDetail.oilUnitPrice}} 升/百公里</div>
                                <input value="{{d.feeDetail.oilUnitPrice}}" type="text" name="oilUnitPrice" class="layui-input" style="width: 0;height: 0;opacity:0;">
                            </div>
                        </div>
                    </div>
                    <div class="layui-inline layui-col-md4">
                        <label class="layui-form-label text_left form_label"><span class="red">*</span>油</label><br>
                        <div class="layui-input-inline layui-row">
                            <div class="layui-col-md7 relative">
                                <span class="input_unit">升</span>
                                <input data-field="prePayOil" value="{{d.feeDetail.prePayOil}}" onkeyup="num(this)" type="text" name="prePayOil" lay-verify="required" autocomplete="off" class="layui-input input_fee">
                            </div>
                            <div class="layui-col-md5 origin_fee">
                                {{# if(dataPermission.canViewOrderCost != 'Y'){ }}
                                <div class="blue">油箱容量：{{'****升'}}</div>
                                {{# }else{ }}
                                <div class="blue">油箱容量：{{d.feeDetail.oilCapacity > 100000 ? '无限' : d.feeDetail.oilCapacity * .95 + '升'}}</div>
                                {{# } }}
                                <input value="{{d.feeDetail.oilCapacity}}" type="text" name="oilCapacity" class="layui-input" style="width: 0;height: 0;opacity:0;">
                            </div>
                        </div>
                    </div>
                    <div class="layui-inline layui-col-md4 origin_fee">
                        <label class="layui-form-label text_left form_label"><span class="red">*</span>油转现</label><br>
                        <div class="layui-input-inline layui-row  layui-col-space14">
                            <div class="layui-col-md4 relative">
                                <span class="input_unit">升</span>
                                {{# if(dataPermission.canViewOrderCost != 'Y'){ }}
                                <input value="{{'****'}}" onchange="num(this)" disabled type="text" name="" autocomplete="off" class="layui-input">
                                {{# }else{ }}
                                <input value="{{(d.feeDetail.oil * 1 - d.feeDetail.prePayOil * 1).toFixed(2)}}" onchange="num(this)" disabled type="text" name="" autocomplete="off" class="layui-input">
                                {{# } }}
                                <span class="blue">x</span>
                            </div>
                            <div class="layui-col-md4 relative">
                                <span class="input_unit">元/升</span>
                                <input value="{{d.feeDetail.closestOilPrice}}" onchange="num(this)" disabled type="text" name="closestOilPrice" autocomplete="off" class="layui-input">
                                <span class="blue">=</span>
                            </div>
                            <div class="layui-col-md4 relative">
                                <span class="input_unit">元</span>
                                <input value="{{d.feeDetail.oilAmount}}" onchange="num(this)" disabled type="text" name="oilAmount" autocomplete="off" class="layui-input">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form_item_container">
                <div class="layui-form-item layui-row">
                    <div class="layui-inline layui-col-md4">
                        <label class="layui-form-label text_left form_label"><span class="red">*</span>现金</label><br>
                        <div class="layui-input-inline layui-row">
                            <div class="layui-col-md7 relative">
                                <span class="input_unit">元</span>
                                <input data-field="amount" value="{{d.feeDetail.amount}}" onkeyup="num(this)" type="text" name="amount" lay-verify="required" autocomplete="off" class="layui-input input_fee">
                            </div>
                            <div class="layui-col-md5 origin_fee">
                                <div class="blue">规定：{{d.freightUnitPrice}} 元/km</div>
                                <div class="blue">实际：{{d.feeDetail.freightUnitPrice}} 元/km</div>
                                <input value="{{d.feeDetail.freightUnitPrice}}" type="text" name="freightUnitPrice" class="layui-input" style="width: 0;height: 0;opacity:0;">
                            </div>
                        </div>
                    </div>
                    <div class="layui-inline layui-col-md4">
                        <label class="layui-form-label text_left form_label"><span class="red">*</span>补助</label><br>
                        <div class="layui-input-inline layui-row">
                            <div class="layui-col-md7 relative">
                                <span class="input_unit">元</span>
                                <input value="{{d.subsidy}}" disabled type="text" name="subsidy" lay-verify="required" autocomplete="off" class="layui-input input_fee">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form_item_container">
                <div class="layui-form-item layui-row">
                    <div class="layui-inline layui-col-md4">
                        <label class="layui-form-label text_left form_label">总现金</label><br>
                        <div class="layui-input-inline layui-row">
                            <div class="layui-col-md7 relative">
                                <span class="input_unit">元</span>
                                <input value="{{d.feeDetail.totalAmount}}" onchange="num(this)" disabled type="text" name="totalAmount" lay-verify="required" autocomplete="off" class="layui-input">
                            </div>
                            <div class="layui-col-md5 origin_fee">
                                <div class="blue">现金+油转现+补助</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form_item_container">
                <div class="layui-form-item layui-row">
                    <div class="layui-inline layui-col-md4">
                        <label class="layui-form-label text_left form_label"><span class="red">*</span>预付现金</label><br>
                        <div class="layui-input-inline layui-row">
                            <div class="layui-col-md7 relative">
                                <span class="input_unit">元</span>
                                <input data-field="prePayAmount" value="{{(d.feeDetail.prePayAmount * 1).toFixed(2)}}" onkeyup="num(this)" type="text" name="prePayAmount" lay-verify="required" autocomplete="off" class="layui-input input_fee">
                            </div>
                            <div class="layui-col-md5 origin_fee">
                                <div class="blue">规定：{{d.prePayRatio}}%</div>
                                <div class="blue">实际：{{d.feeDetail.prePayRatio}}%</div>
                                <input value="{{d.feeDetail.prePayRatio}}" type="text" name="prePayRatio" class="layui-input" style="width: 0;height: 0;opacity:0;">
                            </div>
                        </div>
                    </div>
                    <div class="layui-inline layui-col-md4">
                        <label class="layui-form-label text_left form_label"><span class="red">*</span>到付现金</label><br>
                        <div class="layui-input-inline layui-row">
                            <div class="layui-col-md7 relative">
                                <span class="input_unit">元</span>
                                <input data-field="arrivePayAmount" value="{{(d.feeDetail.arrivePayAmount * 1).toFixed(2)}}" onkeyup="num(this)" type="text" name="arrivePayAmount" lay-verify="required" autocomplete="off" class="layui-input input_fee">
                            </div>
                            <div class="layui-col-md5 origin_fee">
                                <div class="blue">规定：{{d.arrivePayRatio}}%</div>
                                <div class="blue">实际：{{d.feeDetail.arrivePayRatio}}%</div>
                                <input value="{{d.feeDetail.arrivePayRatio}}" type="text" name="arrivePayRatio" class="layui-input" style="width: 0;height: 0;opacity:0;">
                            </div>
                        </div>
                    </div>
                    <div class="layui-inline layui-col-md4">
                        <label class="layui-form-label text_left form_label"><span class="red">*</span>尾款现金</label><br>
                        <div class="layui-input-inline layui-row">
                            <div class="layui-col-md7 relative">
                                <span class="input_unit">元</span>
                                <input value="{{(d.feeDetail.tailPayAmount * 1).toFixed(2)}}" onchange="num(this)" disabled type="text" name="tailPayAmount" lay-verify="required" autocomplete="off" class="layui-input input_fee">
                            </div>
                            <div class="layui-col-md5 origin_fee">
                                <div class="blue">规定：{{d.tailPayRatio}}%</div>
                                <div class="blue">实际：{{d.feeDetail.tailPayRatio}}%</div>
                                <input value="{{d.feeDetail.tailPayRatio}}" type="text" name="tailPayRatio" class="layui-input" style="width: 0;height: 0;opacity:0;">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form_item_container">
                <div class="layui-form-item layui-row">
                    <div class="layui-inline layui-col-md3">
                        <label class="layui-form-label text_left form_label">结算方式</label><br>
                        <div class="layui-input-inline layui-row">
                            <select disabled name="tailPayBillType" lay-filter="tailPayBillType">
                                <option value="1" selected>现结</option>
                                <option value="2">月结</option>
                                <option value="3">账期</option>
                            </select>
                        </div>
                    </div>
                    <div class="layui-inline layui-col-md3 layui-col-md-offset1 tailPayBillDate hide">
                        <label class="layui-form-label text_left form_label">尾款账期</label><br>
                        <div class="layui-input-inline layui-row relative">
                            <span class="input_unit">天</span>
                            <input value="{{d.feeDetail.tailPayBillDate || ''}}" type="text" name="tailPayBillDate" class="layui-input">
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </script>
    <script id="form_ascription_tpl" type="text/html">
        <form lay-filter="form_ascription" class="layui-form">
            <!-- 头部 -->
            <div class="page-header border-bottom">
                <div class="layui-row">
                    <div class="layui-col-md6">
                        <div class="title">跟单与归属</div>
                    </div>
                </div>
            </div>
            <div class="form_item_container">
                <div class="layui-form-item layui-row">
                    <div class="layui-inline layui-col-md3">
                        <label class="layui-form-label text_left form_label">发运员</label><br>
                        <div class="layui-input-inline">
                            <div class="layui-row">
                                <div class="layui-col-md8">
                                    <select name="deliveryOperator" lay-search>
                                        {{#  layui.each(d.staffList, function(index, item){ }}
                                            <option data-name="{{item.name}}" value="{{item.name + ',' + item.phone}}">{{item.name + item.phone}}</option>
                                        {{#  }); }}
                                    </select>
                                </div>
                                <div class="layui-col-md3">
                                    <button data-field="deliveryOperator" type="button" class="select_operator_btn layui-btn layui-btn-sm layui-btn-fluid">选择</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="layui-inline layui-col-md3 layui-col-md-offset1">
                        <label class="layui-form-label text_left form_label">跟单员</label><br>
                        <div class="layui-input-inline">
                            <div class="layui-row">
                                <div class="layui-col-md8">
                                    <select name="followOperator" lay-search>
                                        {{#  layui.each(d.staffList, function(index, item){ }}
                                            <option data-name="{{item.name}}" value="{{item.name + ',' + item.phone}}">{{item.name + item.phone}}</option>
                                        {{#  }); }}
                                    </select>
                                </div>
                                <div class="layui-col-md3">
                                    <button data-field="followOperator" type="button" class="select_operator_btn layui-btn layui-btn-sm layui-btn-fluid">选择</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="layui-inline layui-col-md3 layui-col-md-offset1">
                        <label class="layui-form-label text_left form_label">归属部门</label><br>
                        <div class="layui-input-inline">
                            <input type="text" name="department" lay-verify="required" autocomplete="off" class="layui-input">
                        </div>
                    </div>
                </div>
                <!-- <div class="layui-form-item layui-row">
                    <div class="layui-inline layui-col-md3">
                        <label class="layui-form-label text_left form_label">短驳司机</label><br>
                        <div class="layui-input-inline">
                            <div class="layui-row">
                                <div class="layui-col-md8">
                                    <select name="followOperator" lay-search>
                                        {{#  layui.each(d.driverList, function(index, item){ }}
                                            <option data-name="{{item.name}}" value="{{item.name + ',' + item.phone}}">{{item.name + item.phone}}</option>
                                        {{#  }); }}
                                    </select>
                                </div>
                                <div class="layui-col-md3">
                                    <button data-field="followOperator" type="button" class="select_driver_btn layui-btn layui-btn-sm layui-btn-fluid">选择</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div> -->
            </div>
        </form>
    </script>
    <script id="followOperatorPhoneSelecter_tpl" type="text/html">
        <select name="settleWay" lay-verify="">
            {{#  layui.each(d.arrivePay, function(index, item){ }}
            <option value="1">现结</option>
            {{#  }); }}
        </select>
    </script>
    <script id="driver_list_tpl" type="text/html">
        <div id="match_driver_list" class="match_driver_list">
            {{#  layui.each(d.list, function(index, item){ }}
            <div data-index="{{index}}" class="driver_item">
                <span class="driver_name">{{item.name}}</span>
            </div>
            {{#  }); }}
        </div>
    </script>
    <div id="tables_container" class="">
        <div lay-filter="cars_table" id="cars_table"></div>
        <div lay-filter="drivers_table" id="drivers_table"></div>
        <div lay-filter="staffList_table" id="staffList_table"></div>
    </div>
    <script id="tables_tpl" type="text/html">
        <div lay-filter="cars_table" id="cars_table"></div>
        <div lay-filter="drivers_table" id="drivers_table"></div>
        <div lay-filter="staffList_table" id="staffList_table"></div>
    </script>
    <div class="select-map-dialog" id="select-map-dialog">
        <div id="select-map"></div>
        <div style="padding-top: 10px;text-align: center;">当前选择地址：<span id="select-address"></span></div>
        <div class="select-location">
            <input class="location-name" name="keyword" id="seachLocation" autocomplete="off" placeholder="请输入位置" value=""/>
            <button type="button" class="layui-btn layui-btn-sm select-btn" id="regionMapPoint">搜索</button>
        </div>
    </div>
</body>
<script src="./js/order-edit.js?VERSION"></script>

</html>