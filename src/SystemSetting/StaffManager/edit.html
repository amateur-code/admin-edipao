<!doctype html>
<html class="x-admin-sm">

<head>
    <meta charset="UTF-8">
    <title>E地跑运营平台</title>
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <link rel="stylesheet" href="../../css/font.css">
    <link rel="stylesheet" href="../../css/xadmin.css">
    <!-- <link rel="stylesheet" href="./css/theme5.css"> -->
    <script type="text/javascript" src="../../js/jquery.min.js"></script>
    <script type="text/javascript" src="../../lib/layui/layui.js"></script>
    <script type="text/javascript" src="../../js/common.js"></script>
    <!-- 让IE8/9支持媒体查询，从而兼容栅格 -->
    <!--[if lt IE 9]>
          <script src="https://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
          <script src="https://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
    <script>
        // 是否开启刷新记忆tab功能
    // var is_remember = false;
    </script>
</head>

<body>
    <div class="layui-fluid">
        <div class="layui-row">
            <form class="layui-form" lay-filter="editStaff">
                <div class="layui-form-item">
                    <label for="name" class="layui-form-label">
                        <span class="x-red">*</span>员工姓名
                    </label>
                    <div class="layui-input-inline">
                        <input type="text" id="name" name="name" required="" lay-verify="name" autocomplete="off" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label for="phone" class="layui-form-label">
                        <span class="x-red">*</span>员工手机
                    </label>
                    <div class="layui-input-inline">
                        <input type="text" id="phone" name="phone" required="" lay-verify="phone" autocomplete="off" class="layui-input">
                    </div>
                    
                </div>
                <div class="layui-form-item">
                    <label for="idCard" class="layui-form-label">
                        <span class="x-red">*</span>身份证号
                    </label>
                    <div class="layui-input-inline">
                        <input type="text" id="idCard" name="idCard" required="" autocomplete="off" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label for="cardNo" class="layui-form-label">
                        <span class="x-red">*</span>员工工号
                    </label>
                    <div class="layui-input-inline">
                        <input type="text" id="cardNo" name="cardNo" required="" autocomplete="off" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label for="positions" class="layui-form-label">
                        <span class="x-red">*</span>员工职位
                    </label>
                    <div class="layui-input-inline">
                        <input type="text" id="positions" name="positions" required="" autocomplete="off" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label for="dept" class="layui-form-label">
                        <span class="x-red">*</span>所属部门
                    </label>
                    <div class="layui-input-inline">
                        <input type="text" id="dept" name="dept" required="" autocomplete="off" class="layui-input">
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label"><span class="x-red">*</span>状态</label>
                    <div class="layui-input-inline">
                    	<input type="radio" name="status" value="1" title="有效" checked>
                    	<input type="radio" name="status" value="0" title="无效">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label for="L_repass" class="layui-form-label">
                    </label>
                    <button class="layui-btn" lay-filter="update" lay-submit>
                        修改
                    </button>
                </div>
            </form>
        </div>
    </div>
    <script type="text/javascript">
    	layui.use(['form', 'layer'],function(form,layer){
    		xadmin = layui.xadmin;
    		edipao = layui.edipao;

    		var params = edipao.urlGet();

    		edipao.request({
    			type: 'GET',
	        	url: '/admin/staff/detail',
	        	data: {
	        		id: params.id
	        	}
	        }).done(res=>{
	        	if(res.code == 0){
	        		form.val("editStaff", res.data);
	        	}else{
	        		layer.msg(res.message)
	        	}
	        })

    		//自定义验证规则
            form.verify({
                name: function(value) {
                    if (value.length < 2) {
                        return '员工姓名至少得2个字符';
                    }
                },
                phone: function(value){
                	if(!/^1\d{10}$/.test(value)){ 
                		return '手机号格式不正确';
                	}
                }
            });

         	form.on('submit(update)',function(data) {
                data.field.id = params.id;
                edipao.request({
                	url: '/admin/staff/update',
                	data: data.field,
                }).done(res=>{
                	if(res.code == 0){
                		layer.alert("跟新员工成功", {icon: 6}, function(){
                			xadmin.close();
                			xadmin.father_reload();
                		});
                	}else{
                		layer.msg(res.message)
                	}
                })
            });

    	})
    </script>
</body>

</html>